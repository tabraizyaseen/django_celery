{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Progress Bar</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


	<style type="text/css">
		tr{
			position: relative;
		    box-sizing: border-box;
		}
		td {
		    box-sizing: border-box;
		}
		.progress-td {
			position: absolute;
		    z-index: 1;
		    display: block;
		    width: 100%;
		    top: 0;
		    left: -1px;
		    padding: 0 !important;
		    box-sizing: border-box;
		}
		.progress-td .progress {
			height: 5px;
		    box-sizing: border-box;
		}
		
	</style>


</head>
<body>
<h1>Place bar here</h1>

<table class="table table-striped">
	<thead>
		<tr>
			<th style="width: 15%">#</th>
			<th>Category</th>
			<th style="width: 15%">Action</th>
		</tr>
	</thead>
	<tbody>

	<tr>
		<td class="detail">
			<div class="progress-td">
				<div class="progress">
				  <div id="bar-progress" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
				</div>
			</div>
			1
		</td>
		<td><a href="#">not a link</a></td>
		
		<td>
			<!-- Spinner -->
			<div id="btn-1">
				<button class="btn btn-outline-info btn-sel" data-cat="no" area-label="btn-1">
					Get Details
				</button>
				<div id="progress-bar-message"></div>
			</div>
		</td>
	</tr>

</tbody>

	
</table>

<script src="{% static 'celery_progress/celery_progress.js' %}"></script>

<script type="text/javascript">

	var btn_get = document.getElementsByClassName('btn-sel')[0]

	btn_get.addEventListener('click', ()=>{
		console.log("Button Clicked")

		var progressUrl = "{% url 'celery_progress:task_status' task_id %}";

		console.log(progressUrl)
	  CeleryProgressBar.initProgressBar(progressUrl, {
	  	progressBarId: 'bar-progress'
	  });
	})

</script>

</body>
</html>