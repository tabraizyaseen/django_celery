{% extends 'email_sender/base.html' %}

{% load static %}
{% block contents %}

<div class='progress-wrapper'>
  <div id='progress-bar' class='progress-bar' style="background-color: #68a9ef; width: 0%;">&nbsp;</div>
</div>
<div id="progress-bar-message">Waiting for progress to start...</div>

<script src="{% static 'celery_progress/celery_progress.js' %}"></script>

<script type="text/javascript">

	/*document.addEventListener("DOMContentLoaded", function () {

		function customSuccess(progressBarElement, progressBarMessageElement) {
		    progressBarElement.innerHTML = (
		     '<figure class="image"><img src="https://buildwithdjango.com/static/projects/images/aww-yeah.jpg"></figure>'
		    )
		    progressBarElement.style.backgroundColor = '#fff';
		    progressBarMessageElement.innerHTML = 'success!'
		}

		function customError(progressBarElement, progressBarMessageElement) {
		    progressBarElement.innerHTML = (
		     '<figure class="image"><img src="/static/projects/images/okay-guy.jpg"></figure>'
		    )
		    progressBarElement.style.backgroundColor = '#fff';
		    progressBarMessageElement.innerHTML = 'shucks.'
		}

		var taskUrl = "{% url 'celery_progress:task_status' task_id %}";
		CeleryProgressBar.initProgressBar(taskUrl, {
		    onSuccess: customSuccess,
		    onError: customError,
		});
	});*/

	// vanilla JS version
	document.addEventListener("DOMContentLoaded", function () {
	  var progressUrl = "{% url 'celery_progress:task_status' task_id %}";
	  CeleryProgressBar.initProgressBar(progressUrl);
	});
	

</script>
{% endblock %}